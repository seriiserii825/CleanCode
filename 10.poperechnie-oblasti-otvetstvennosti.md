# –ü–æ–ø–µ—Ä–µ—á–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

–í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –æ–±–ª–∞—Å—Ç—è—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ EJB2 –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–º—É —Ä–∞–∑–¥–µ-
–ª–µ–Ω–∏—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ –æ–±–ª–∞—Å—Ç–∏ —Ç—Ä–∞–Ω–∑–∞–∫-
—Ü–∏–æ–Ω–Ω–æ—Å—Ç–∏, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –æ–±—ä—è–≤–ª—è–µ—Ç—Å—è –≤ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–∞—Ö
–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞.

–¢–∞–∫–∏–µ –æ–±–ª–∞—Å—Ç–∏, –∫–∞–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤, –≤—ã—Ö–æ–¥—è—Ç –∑–∞ —Ä–∞–º–∫–∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≥—Ä–∞–Ω–∏—Ü
–æ–±—ä–µ–∫—Ç–æ–≤ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã –æ–±—ã—á–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø–æ
–æ–¥–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –°–£–ë–î1 –≤–º–µ—Å—Ç–æ –Ω–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ-
–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤, —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å—Ö–µ–º–æ–π –≤—ã–±–æ—Ä–∞ –∏–º–µ–Ω —Ç–∞–±–ª–∏—Ü –∏ —Å—Ç–æ–ª–±—Ü–æ–≤, –µ–¥–∏–Ω–æ–π
—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ–π —Å–µ–º–∞–Ω—Ç–∏–∫–æ–π –∏ —Ç.¬†–¥.

–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–º–æ–∂–µ–Ω –º–æ–¥—É–ª—å–Ω—ã–π, –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é
—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤. –û–¥–Ω–∞–∫–æ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –≤–∞–º –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –ø–æ–≤—Ç–æ—Ä—è—Ç—å
–ø–æ —Å—É—Ç–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∫–æ–¥, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –≤–æ –º–Ω–æ–≥–∏—Ö –æ–±—ä-
–µ–∫—Ç–∞—Ö. –î–ª—è –ø–æ–¥–æ–±–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ—Ä–º–∏–Ω ¬´–ø–æ–ø–µ—Ä–µ—á–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ –æ—Ç-
–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏¬ª. –ü—Ä–∏ —ç—Ç–æ–º –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –º–æ–¥—É–ª—å–Ω–æ–π,
–∏ –ª–æ–≥–∏–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏, —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º–∞—è –≤ –∏–∑–æ–ª—è—Ü–∏–∏, —Ç–æ–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–æ-
–¥—É–ª—å–Ω–æ–π. –ü—Ä–æ–±–ª–µ–º—ã –≤–æ–∑–Ω–∏–∫–∞—é—Ç –≤ —Ç–æ—á–∫–∞—Ö –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è —ç—Ç–∏—Ö –æ–±–ª–∞—Å—Ç–µ–π. –ú–æ–∂–Ω–æ —Å–∫–∞-
–∑–∞—Ç—å, —á—Ç–æ –ø–æ–¥—Ö–æ–¥, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ EJB –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—é
–æ–±—ä–µ–∫—Ç–æ–≤, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º, –ø—Ä–µ–¥–≤–æ—Å—Ö–∏—Ç–∏–ª –∞—Å–ø–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ
–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ (–ê–û–ü2), –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥
–∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é –º–æ–¥—É–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –ø–æ–ø–µ—Ä–µ—á–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏.

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö.

–ó–∞ –æ–±—â–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –∞—Å–ø–µ–∫—Ç–∞—Ö –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ [AOSD], –∞ –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
–æ–± AspectJ ‚Äî –∫ [AspectJ] –∏ [Colyer].190‚ÄÉ‚ÄÉ‚ÄÉ –ì–ª–∞–≤–∞ 11. –°–∏—Å—Ç–µ–º—ã
–í –ê–û–ü —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª—å–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –Ω–∞–∑—ã–≤–∞–µ–º—ã–µ –∞—Å–ø–µ–∫—Ç–∞–º–∏, –æ–ø—Ä–µ–¥–µ-
–ª—è—é—Ç, –≤ –∫–∞–∫–∏—Ö —Ç–æ—á–∫–∞—Ö —Å–∏—Å—Ç–µ–º—ã –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –º–µ–Ω—è—Ç—å—Å—è –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –ø–æ—Å–ª–µ-
–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—è–º–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –∏–ª–∏
–ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞.

–í –ø—Ä–∏–º–µ—Ä–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –æ–±—ä–µ–∫—Ç–æ–≤ –≤—ã –æ–±—ä—è–≤–ª—è–µ—Ç–µ, –∫–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã, –∞—Ç—Ä–∏–±—É—Ç—ã –∏ —Ç.¬†–¥.
–¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è, –∞ –∑–∞—Ç–µ–º –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç–µ –∑–∞–¥–∞—á–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–≤–æ–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫-
—Ç—É—Ä–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–æ–≤–µ–¥–µ–Ω–∏–∏ –≤–Ω–æ—Å—è—Ç—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –ê–û–ü –±–µ–∑
–≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –≤ —Ü–µ–ª–µ–≤–æ–π –∫–æ–¥1. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ç—Ä–∏ –∞—Å–ø–µ–∫—Ç–∞ (–∏–ª–∏ ¬´–∞—Å–ø–µ–∫—Ç–æ-–ø–æ–¥–æ–±–Ω—ã—Ö¬ª
–º–µ—Ö–∞–Ω–∏–∑–º–∞) –≤ Java.

# üß† –ü–æ–ø–µ—Ä–µ—á–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –≤ Python (–∞–Ω–∞–ª–æ–≥ EJB2 –∏ AOP)

---

## üìå –°—É—Ç—å

- –ë–∏–∑–Ω–µ—Å-–æ–±—ä–µ–∫—Ç (`Account`) —Å–æ–¥–µ—Ä–∂–∏—Ç **—Ç–æ–ª—å–∫–æ –ø—Ä–µ–¥–º–µ—Ç–Ω—É—é –ª–æ–≥–∏–∫—É**
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** –∏ **–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî —ç—Ç–æ **–æ—Ç–¥–µ–ª—å–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã**, –ø—Ä–∏–º–µ–Ω—è–µ–º—ã–µ —Å–Ω–∞—Ä—É–∂–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Python-–¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –∫–∞–∫ –º–µ—Ö–∞–Ω–∏–∑–º –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è
  (–∞–Ω–∞–ª–æ–≥ –∞—Å–ø–µ–∫—Ç–æ–≤ –≤ AOP)

---

## üß© –ü—Ä–∏–º–µ—Ä: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤

```python
from dataclasses import dataclass
from functools import wraps

# === AOP-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞: –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è –∞—Å–ø–µ–∫—Ç–æ–≤ ===

def transactional(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        print("[TRANSACTION] Begin")
        try:
            result = func(*args, **kwargs)
            print("[TRANSACTION] Commit")
            return result
        except Exception as e:
            print("[TRANSACTION] Rollback")
            raise e
    return wrapper

def log_call(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        print(f"[LOG] Calling: {func.__name__} with {args[1:]}")
        return func(*args, **kwargs)
    return wrapper

# === DTO: –ø—Ä–æ—Å—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ===

@dataclass
class AccountDTO:
    account_id: int
    balance: float

# === –ü—Ä–µ–¥–º–µ—Ç–Ω–∞—è –æ–±–ª–∞—Å—Ç—å: —á–∏—Å—Ç–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ ===

class Account:
    def __init__(self, dto: AccountDTO):
        self.account_id = dto.account_id
        self.balance = dto.balance

    def deposit(self, amount):
        if amount <= 0:
            raise ValueError("Amount must be positive")
        self.balance += amount

    def __str__(self):
        return f"Account(id={self.account_id}, balance={self.balance})"

# === –°–µ—Ä–≤–∏—Å ‚Äî –æ–±—ë—Ä—Ç–∫–∞ —Å –∞—Å–ø–µ–∫—Ç–∞–º–∏ ===

class AccountService:
    def __init__(self):
        self._accounts = {}

    @transactional
    @log_call
    def create_account(self, dto: AccountDTO):
        account = Account(dto)
        self._accounts[dto.account_id] = account

    @log_call
    def get_account(self, account_id: int) -> Account:
        return self._accounts[account_id]

# === –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ===

def main():
    service = AccountService()

    service.create_account(AccountDTO(1, 100.0))
    service.get_account(1).deposit(50.0)

    account = service.get_account(1)
    print(account)

if __name__ == "__main__":
    main()
```

## ‚úÖ –ß—Ç–æ –∑–¥–µ—Å—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

| –û–±–ª–∞—Å—Ç—å          | –ì–¥–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞  | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                    |
| ---------------- | ---------------- | ----------------------------- |
| üí∞ –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ | `Account`        | –¢–æ–ª—å–∫–æ –¥–µ–π—Å—Ç–≤–∏—è —Å–æ —Å—á—ë—Ç–æ–º     |
| üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ    | `AccountService` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏         |
| üîÅ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏    | `@transactional` | –û–±—ë—Ä—Ç–∫–∞ –≤–æ–∫—Ä—É–≥ –¥–µ–π—Å—Ç–≤–∏–π       |
| üßæ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ   | `@log_call`      | –û–±—â–∏–π –º–µ—Ö–∞–Ω–∏–∑–º –∂—É—Ä–Ω–∞–ª–∏—Ä–æ–≤–∞–Ω–∏—è |

## üß© –ß—Ç–æ –º—ã –∏–∑–±–µ–∂–∞–ª–∏

- –í `Account` **–Ω–µ—Ç –Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**, –Ω–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –ö–æ–¥ **—á–∏—Å—Ç—ã–π**, –ª–æ–≥–∏–∫–∞ –æ—Ç–¥–µ–ª—å–Ω–æ, –∞—Å–ø–µ–∫—Ç—ã –æ—Ç–¥–µ–ª—å–Ω–æ
- –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å **–ø–æ —á–∞—Å—Ç—è–º**

---

> ‚òùÔ∏è –≠—Ç–æ –∏ –µ—Å—Ç—å **–∞—Å–ø–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å—Ç–∏–ª—å**: –º—ã **–æ–±—ä—è–≤–ª—è–µ–º**,
> –≥–¥–µ –Ω—É–∂–Ω—ã –∞—Å–ø–µ–∫—Ç—ã, –∞ –Ω–µ –ø–∏—à–µ–º —ç—Ç–æ –≤—Ä—É—á–Ω—É—é –≤–Ω—É—Ç—Ä–∏ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –ª–æ–≥–∏–∫–∏.
