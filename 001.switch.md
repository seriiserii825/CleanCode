# –ö–æ–º–∞–Ω–¥—ã switch

–ù–∞–ø–∏—Å–∞—Ç—å –∫–æ–º–ø–∞–∫—Ç–Ω—É—é –∫–æ–º–∞–Ω–¥—É switch –¥–æ–≤–æ–ª—å–Ω–æ —Å–ª–æ–∂–Ω–æ1. –î–∞–∂–µ –∫–æ–º–∞–Ω–¥–∞ switch
–≤—Å–µ–≥–æ —Å –¥–≤—É–º—è —É—Å–ª–æ–≤–∏—è–º–∏ –∑–∞–Ω–∏–º–∞–µ—Ç –±–æ–ª—å—à–µ –º–µ—Å—Ç–∞, —á–µ–º –≤ –º–æ–µ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏
–¥–æ–ª–∂–µ–Ω –∑–∞–Ω–∏–º–∞—Ç—å –æ–¥–∏–Ω –±–ª–æ–∫ –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è. –¢–∞–∫–∂–µ —Ç—Ä—É–¥–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∫–æ–º–∞–Ω–¥—É switch,
–∫–æ—Ç–æ—Ä–∞—è –¥–µ–ª–∞–µ—Ç —á—Ç–æ-—Ç–æ –æ–¥–Ω–æ ‚Äî –ø–æ —Å–≤–æ–µ–π –ø—Ä–∏—Ä–æ–¥–µ –∫–æ–º–∞–Ω–¥—ã switch –≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç
N –æ–ø–µ—Ä–∞—Ü–∏–π. –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –æ–±–æ–π—Ç–∏—Å—å –±–µ–∑ –∫–æ–º–∞–Ω–¥ switch —É–¥–∞–µ—Ç—Å—è –Ω–µ –≤—Å–µ–≥–¥–∞, –Ω–æ –ø–æ
–∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ –º—ã –º–æ–∂–µ–º –ø–æ–∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ —Ç–æ–º, —á—Ç–æ–±—ã —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –±—ã–ª–∏ —Å–∫—Ä—ã—Ç—ã
–≤ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–º –∫–ª–∞—Å—Å–µ –∏ –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–ª–∏—Å—å –≤ –∫–æ–¥–µ. –ò –∫–æ–Ω–µ—á–Ω–æ, –≤ —ç—Ç–æ–º –Ω–∞–º –º–æ–∂–µ—Ç
–ø–æ–º–æ—á—å –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º.

## ‚ùå –°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ ‚Äî –≤—Å—ë —á–µ—Ä–µ–∑ `match` (–∞–Ω–∞–ª–æ–≥ `switch`)

```python
from dataclasses import dataclass

@dataclass
class EmployeeRecord:
    name: str
    type: str  # "COMMISSIONED", "HOURLY", "SALARIED"
    salary: float = 0
    base: float = 0
    commission: float = 0
    hours: float = 0
    rate: float = 0


class InvalidEmployeeType(Exception):
    pass


def is_payday(emp: EmployeeRecord) -> bool:
    # –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, –≤—Å–µ–≥–¥–∞ –¥–µ–Ω—å –≤—ã–ø–ª–∞—Ç—ã
    return True


def calculate_pay(emp: EmployeeRecord) -> float:
    match emp.type:
        case "SALARIED":
            return emp.salary
        case "HOURLY":
            return emp.hours * emp.rate
        case "COMMISSIONED":
            return emp.base + emp.commission
        case _:
            raise InvalidEmployeeType(f"–ù–µ–≤–µ—Ä–Ω—ã–π —Ç–∏–ø: {emp.type}")


def deliver_pay(emp: EmployeeRecord, amount: float):
    match emp.type:
        case "SALARIED":
            print(f"{emp.name}: –≤—ã–ø–ª–∞—á–µ–Ω–æ {amount} (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞)")
        case "HOURLY":
            print(f"{emp.name}: –≤—ã–ø–ª–∞—á–µ–Ω–æ {amount} (–ø–æ—á–∞—Å–æ–≤–∞—è –æ–ø–ª–∞—Ç–∞)")
        case "COMMISSIONED":
            print(f"{emp.name}: –≤—ã–ø–ª–∞—á–µ–Ω–æ {amount} (—Å –∫–æ–º–∏—Å—Å–∏–µ–π)")
        case _:
            raise InvalidEmployeeType(f"–ù–µ–≤–µ—Ä–Ω—ã–π —Ç–∏–ø: {emp.type}")


# ======= –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ =======
employees = [
    EmployeeRecord(name="–ò–≤–∞–Ω", type="SALARIED", salary=5000),
    EmployeeRecord(name="–û–ª—å–≥–∞", type="HOURLY", hours=160, rate=20),
    EmployeeRecord(name="–ú–∞–∫—Å–∏–º", type="COMMISSIONED", base=3000, commission=1200),
]

for emp in employees:
    if is_payday(emp):
        pay = calculate_pay(emp)
        deliver_pay(emp, pay)
```

## üîç –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

- –§—É–Ω–∫—Ü–∏–∏ `calculate_pay()` –∏ `deliver_pay()` –¥–æ–ª–∂–Ω—ã **–∑–Ω–∞—Ç—å –ø—Ä–æ –≤—Å–µ —Ç–∏–ø—ã —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤**.
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤–æ–∫ **–≤–æ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö** ‚Üí –Ω–∞—Ä—É—à–∞–µ—Ç **–ø—Ä–∏–Ω—Ü–∏–ø –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç–∏/–∑–∞–∫—Ä—ã—Ç–æ—Å—Ç–∏**.
- –í–æ–∑–Ω–∏–∫–∞–µ—Ç **–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ `match`** –ø–æ —Ç–∏–ø—É –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö.
- –¢—Ä—É–¥–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å.

## üß† –¶–µ–ª—å

–ò–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –≥—Ä–æ–º–æ–∑–¥–∫–∏—Ö `if`/`elif`/`else` –∏–ª–∏ `match`
–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
(–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —Ä–∞—Å—á—ë—Ç–µ –∑–∞—Ä–ø–ª–∞—Ç—ã), –∏—Å–ø–æ–ª—å–∑—É—è –û–û–ü.

## ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

```python
from abc import ABC, abstractmethod
from dataclasses import dataclass
from enum import Enum, auto

# Enum –¥–ª—è —Ç–∏–ø–æ–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
class EmployeeType(Enum):
    COMMISSIONED = auto()
    HOURLY = auto()
    SALARIED = auto()

@dataclass
class EmployeeRecord:
    name: str
    type: EmployeeType
    salary: float = 0
    base: float = 0
    commission: float = 0
    hours: float = 0
    rate: float = 0


class InvalidEmployeeType(Exception):
    pass


class Employee(ABC):
    def __init__(self, record: EmployeeRecord):
        self.name: str = record.name

    @abstractmethod
    def is_payday(self) -> bool:
        pass

    @abstractmethod
    def calculate_pay(self) -> float:
        pass

    @abstractmethod
    def deliver_pay(self, amount: float):
        pass


class CommissionedEmployee(Employee):
    def __init__(self, record: EmployeeRecord):
        super().__init__(record)
        self.base: float = record.base
        self.commission: float = record.commission

    def is_payday(self) -> bool:
        return True

    def calculate_pay(self) -> float:
        return self.base + self.commission

    def deliver_pay(self, amount: float):
        print(f"{self.name}: –≤—ã–ø–ª–∞—á–µ–Ω–æ {amount} (—Å –∫–æ–º–∏—Å—Å–∏–µ–π)")


class HourlyEmployee(Employee):
    def __init__(self, record: EmployeeRecord):
        super().__init__(record)
        self.hours: float = record.hours
        self.rate: float = record.rate

    def is_payday(self) -> bool:
        return True

    def calculate_pay(self) -> float:
        return self.hours * self.rate

    def deliver_pay(self, amount: float):
        print(f"{self.name}: –≤—ã–ø–ª–∞—á–µ–Ω–æ {amount} (–ø–æ—á–∞—Å–æ–≤–∞—è –æ–ø–ª–∞—Ç–∞)")


class SalariedEmployee(Employee):
    def __init__(self, record: EmployeeRecord):
        super().__init__(record)
        self.salary: float = record.salary

    def is_payday(self) -> bool:
        return True

    def calculate_pay(self) -> float:
        return self.salary

    def deliver_pay(self, amount: float):
        print(f"{self.name}: –≤—ã–ø–ª–∞—á–µ–Ω–æ {amount} (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞)")


class EmployeeFactory:
    @staticmethod
    def make_employee(record: EmployeeRecord) -> Employee:
        match record.type:
            case EmployeeType.COMMISSIONED:
                return CommissionedEmployee(record)
            case EmployeeType.HOURLY:
                return HourlyEmployee(record)
            case EmployeeType.SALARIED:
                return SalariedEmployee(record)
            case _:
                raise InvalidEmployeeType(f"–ù–µ–≤–µ—Ä–Ω—ã–π —Ç–∏–ø: {record.type}")


# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
employees = [
    EmployeeRecord(name="–ò–≤–∞–Ω", type=EmployeeType.SALARIED, salary=5000),
    EmployeeRecord(name="–û–ª—å–≥–∞", type=EmployeeType.HOURLY, hours=160, rate=20),
    EmployeeRecord(name="–ú–∞–∫—Å–∏–º", type=EmployeeType.COMMISSIONED, base=3000, commission=1200),
]

for record in employees:
    employee = EmployeeFactory.make_employee(record)
    if employee.is_payday():
        pay = employee.calculate_pay()
        employee.deliver_pay(pay)
```

## üí° –û–±—ä—è—Å–Ω–µ–Ω–∏–µ

- –í–º–µ—Å—Ç–æ –±–æ–ª—å—à–æ–≥–æ `switch` –ø–æ —Ç–∏–ø—É —Ä–∞–±–æ—Ç–Ω–∏–∫–∞, –∫–∞–∂–¥—ã–π —Ç–∏–ø —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–º –∫–ª–∞—Å—Å–æ–º.
- –õ–æ–≥–∏–∫–∞ `calculate_pay`, `is_payday`, `deliver_pay`
  —Ç–µ–ø–µ—Ä—å –≤–Ω—É—Ç—Ä–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–¥–∫–ª–∞—Å—Å–∞.
- –ö–æ–º–∞–Ω–¥–∞ `switch` (–∏–ª–∏ `match` –≤ Python 3.10+) –æ—Å—Ç–∞–ª–∞—Å—å —Ç–æ–ª—å–∫–æ **–æ–¥–∏–Ω —Ä–∞–∑**
  ‚Äî –≤ **—Ñ–∞–±—Ä–∏–∫–µ**, –∏ **—Å–∫—Ä—ã—Ç–∞** –æ—Ç –æ—Å—Ç–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã.
- –ë–ª–∞–≥–æ–¥–∞—Ä—è –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º—É, –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ —Å–∏—Å—Ç–µ–º—ã —Ç–µ–ø–µ—Ä—å –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞.
